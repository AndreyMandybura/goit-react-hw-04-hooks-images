{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/api.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","imageSearch","handleChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","props","onSubmit","className","s","SearchForm","this","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","ApiService","API_KEY","BASE_URL","page","a","url","fetch","response","json","data","hits","ImageGalleryItem","img","tags","webformatURL","largeImageURL","onClick","ImageGalleryItem_image","src","alt","Button","id","apiService","ImageGallery","gallery","error","status","handleOnLoadMoreClick","prevState","prevProps","prevName","nextName","prevPage","nextPage","fetchImage","then","catch","document","getElementById","scrollIntoView","block","behavior","Loader","color","height","width","timeout","message","GalleryBox","map","modalRoot","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","showModal","toggleModal","handleFormSubmit","console","log","setLargeImage","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3c7785e3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2rpZE\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__gusxh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3CMBO\",\"Modal\":\"Modal_Modal__3zf9Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1MokV\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    imageSearch: '',\n  };\n\n  handleChange = e => {\n    this.setState({ imageSearch: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.imageSearch);\n    this.setState({ imageSearch: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button_label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.imageSearch}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n\nexport default Searchbar;\n","export default class ApiService {\n  constructor() {\n    this.API_KEY = '23647546-0c9963079c4ed781ee6b1e575';\n    this.BASE_URL = 'https://pixabay.com/api/';\n  }\n\n  async fetchImage(imageSearch, page) {\n    const url = `${this.BASE_URL}?image_type=photo&orientation=horizontal&q=${imageSearch}&page=${page}&per_page=12&key=${this.API_KEY}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    return data.hits;\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({\n  img: { tags, webformatURL, largeImageURL },\n  onClick,\n}) {\n  return (\n    <li\n      className={s.ImageGalleryItem}\n      onClick={() => onClick({ largeImageURL })}\n    >\n      <img className={s.ImageGalleryItem_image} src={webformatURL} alt={tags} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  tags: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  werformatURL: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" id=\"btn\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport ApiService from '../../services/api';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport Loader from 'react-loader-spinner';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nconst apiService = new ApiService();\n\nclass ImageGallery extends Component {\n  state = {\n    gallery: [],\n    error: null,\n    status: 'idle',\n    page: 1,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevProps.imageSearch;\n    const nextName = this.props.imageSearch;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevName !== nextName) {\n      this.setState({ status: 'pending' });\n      apiService\n        .fetchImage(nextName)\n        .then(gallery => this.setState({ gallery, status: 'resolved' }))\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n\n    if (prevPage !== nextPage) {\n      this.setState({ status: 'pending' });\n      apiService\n        .fetchImage(prevName, this.state.page)\n        .then(gallery => {\n          this.setState({\n            gallery: [...prevState.gallery, ...gallery],\n            status: 'resolved',\n          });\n          document\n            .getElementById('btn')\n            .scrollIntoView({ block: 'center', behavior: 'smooth' });\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n\n  handleOnLoadMoreClick = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  render() {\n    const { gallery, error, status } = this.state;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return (\n        <Loader\n          className={s.Loader}\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={250}\n          width={250}\n          timeout={3000}\n        />\n      );\n    }\n\n    if (status === 'rejected') {\n      return <h1>{error.message}</h1>;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <div className={s.GalleryBox}>\n          <ul className={s.ImageGallery}>\n            {gallery.map(img => (\n              <ImageGalleryItem\n                key={img.id}\n                img={img}\n                onClick={this.props.onClick}\n              />\n            ))}\n          </ul>\n          <Button onClick={this.handleOnLoadMoreClick} />\n        </div>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  gallery: PropTypes.arrayOf(PropTypes.object),\n  onClickImage: PropTypes.func,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    e.code === 'Escape' && this.props.onClose();\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import { Component } from 'react';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    imageSearch: '',\n    largeImageURL: '',\n    showModal: false,\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  handleFormSubmit = imageSearch => {\n    this.setState({ imageSearch });\n    console.log(imageSearch);\n  };\n\n  setLargeImage = ({ largeImageURL }) => {\n    this.setState({ largeImageURL, showModal: true });\n  };\n\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          imageSearch={this.state.imageSearch}\n          onClick={this.setLargeImage}\n        />\n        {this.state.showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={this.state.largeImageURL} alt=\"\" />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3Lqjx\",\"SearchForm\":\"Searchbar_SearchForm__3j9Yj\",\"SearchForm_button\":\"Searchbar_SearchForm_button__2I9Ef\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__22ZB2\",\"SearchForm_input\":\"Searchbar_SearchForm_input__1q5yF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3HPeb\",\"GalleryBox\":\"ImageGallery_GalleryBox__1I5w6\",\"Loader\":\"ImageGallery_Loader__-hG4P\"};"],"sourceRoot":""}