(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2rpZE",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__gusxh"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3CMBO",Modal:"Modal_Modal__3zf9Y"}},17:function(e,t,a){e.exports={Button:"Button_Button__1MokV"}},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3Lqjx",SearchForm:"Searchbar_SearchForm__3j9Yj",SearchForm_button:"Searchbar_SearchForm_button__2I9Ef",SearchForm_button_label:"Searchbar_SearchForm_button_label__22ZB2",SearchForm_input:"Searchbar_SearchForm_input__1q5yF"}},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),o=a.n(r),i=a(3),s=a(4),l=a.n(s),u=a(1);var m=function(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(u.jsx)("header",{className:l.a.Searchbar,children:Object(u.jsxs)("form",{className:l.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(r),o("")},children:[Object(u.jsx)("button",{type:"submit",className:l.a.SearchForm_button,children:Object(u.jsx)("span",{className:l.a.SearchForm_button_label,children:"Search"})}),Object(u.jsx)("input",{className:l.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})},b=a(13),j=a(10),h=a.n(j),d=a(14),f=a(15),_=a(16),O=function(){function e(){Object(f.a)(this,e),this.API_KEY="23647546-0c9963079c4ed781ee6b1e575",this.BASE_URL="https://pixabay.com/api/"}return Object(_.a)(e,[{key:"fetchImage",value:function(){var e=Object(d.a)(h.a.mark((function e(t,a){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.BASE_URL,"?image_type=photo&orientation=horizontal&q=").concat(t,"&page=").concat(a,"&per_page=12&key=").concat(this.API_KEY),e.next=3,fetch(n);case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r.hits);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),g=a(11),p=a.n(g);var x=function(e){var t=e.img,a=t.tags,n=t.webformatURL,c=t.largeImageURL,r=e.onClick;return Object(u.jsx)("li",{className:p.a.ImageGalleryItem,onClick:function(){return r(c)},children:Object(u.jsx)("img",{className:p.a.ImageGalleryItem_image,src:n,alt:a})})},S=a(17),v=a.n(S);var y=function(e){var t=e.onClick;return Object(u.jsx)("button",{type:"button",id:"btn",className:v.a.Button,onClick:t,children:"Load more"})},I=a(18),k=a.n(I),w=a(8),G=a.n(w),F=new O;var C=function(e){var t=e.imageSearch,a=e.onClick,c=Object(n.useState)([]),r=Object(i.a)(c,2),o=r[0],s=r[1],l=Object(n.useState)(null),m=Object(i.a)(l,2),j=m[0],h=m[1],d=Object(n.useState)("idle"),f=Object(i.a)(d,2),_=f[0],O=f[1],g=Object(n.useState)(1),p=Object(i.a)(g,2),S=p[0],v=p[1];return Object(n.useEffect)((function(){t&&(O("pending"),F.fetchImage(t).then((function(e){s(e),O("resolved")})).catch((function(e){h(e),O("rejected")})))}),[t]),Object(n.useEffect)((function(){1!==S&&(O("pending"),F.fetchImage(t,S).then((function(e){s((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),O("resolved"),document.getElementById("btn").scrollIntoView({block:"center",behavior:"smooth"})})).catch((function(e){h(e),O("rejected")})))}),[t,S]),"idle"===_?Object(u.jsx)("div",{}):"pending"===_?Object(u.jsx)(k.a,{className:G.a.Loader,type:"Puff",color:"#00BFFF",height:250,width:250,timeout:3e3}):"rejected"===_?Object(u.jsx)("h1",{children:j.message}):"resolved"===_?Object(u.jsxs)("div",{className:G.a.GalleryBox,children:[Object(u.jsx)("ul",{className:G.a.ImageGallery,children:o.map((function(e){return Object(u.jsx)(x,{img:e,onClick:a},e.id)}))}),Object(u.jsx)(y,{onClick:function(){v((function(e){return e+1}))}})]}):void 0},B=a(12),E=a.n(B),N=document.querySelector("#modal-root");function L(e){var t=e.onClose,a=e.children;Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return Object(r.createPortal)(Object(u.jsx)("div",{className:E.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(u.jsx)("div",{className:E.a.Modal,children:a})}),N)}a(45);var M=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),s=o[0],l=o[1],b=Object(n.useState)(!1),j=Object(i.a)(b,2),h=j[0],d=j[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)(m,{onSubmit:function(e){c(e),console.log(e)}}),Object(u.jsx)(C,{imageSearch:a,onClick:function(e){l(e),d(!0)}}),h&&Object(u.jsx)(L,{onClose:function(){d(!h)},children:Object(u.jsx)("img",{src:s,alt:""})})]})};a(46);o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(M,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3HPeb",GalleryBox:"ImageGallery_GalleryBox__1I5w6",Loader:"ImageGallery_Loader__-hG4P"}}},[[47,1,2]]]);
//# sourceMappingURL=main.2c374ef7.chunk.js.map